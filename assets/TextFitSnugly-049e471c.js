import{r as f,u as I,N as O,s as y,O as W,S as q,i as R,J as U,e as k,j as C,K as F,L as M,M as T,t as j,a as B,p as D,P as J,Q as K,v as L}from"./SlideBox-4881029e.js";const u=[];function p(t,n){return{subscribe:N(t,n).subscribe}}function N(t,n=f){let e;const s=new Set;function o(a){if(y(t,a)&&(t=a,e)){const r=!u.length;for(const l of s)l[1](),u.push(l,t);if(r){for(let l=0;l<u.length;l+=2)u[l][0](u[l+1]);u.length=0}}}function i(a){o(a(t))}function c(a,r=f){const l=[a,r];return s.add(l),s.size===1&&(e=n(o)||f),a(t),()=>{s.delete(l),s.size===0&&e&&(e(),e=null)}}return{set:o,update:i,subscribe:c}}function b(t,n,e){const s=!Array.isArray(t),o=s?[t]:t,i=n.length<2;return p(e,c=>{let a=!1;const r=[];let l=0,g=f;const h=()=>{if(l)return;g();const d=n(s?r[0]:r,c);i?c(d):g=W(d)?d:f},x=o.map((d,_)=>I(d,z=>{r[_]=z,l&=~(1<<_),a&&h()},()=>{l|=1<<_}));return a=!0,h(),function(){O(x),g(),a=!1}})}const w=window.nodecg,P=p([],t=>{w.Replicant("commentatorArray","speedcontrol-additions").on("change",n=>{t(n)})}),X=t=>b(P,n=>n.filter(e=>e.assignedRunIdArray.includes(t))),Q=p([],t=>{w.Replicant("speedcontrolUserAdditionArray","speedcontrol-additions").on("change",n=>{t(n)})}),A=window.nodecg,S=p([],t=>{A.Replicant("runDataArray","nodecg-speedcontrol").on("change",n=>{t(n)})}),m=p(void 0,t=>{A.Replicant("runDataActiveRun","nodecg-speedcontrol").on("change",n=>{t(n)})}),Y=b([S,m],([t,n])=>{if(!n)return;const e=t.findIndex(s=>s.id===n.id);return t[e+1]}),Z=b([S,m],([t,n])=>{if(!n)return[];const e=t.findIndex(s=>s.id===n.id);return t.slice(e,e+3)}),v=t=>b([m,Q],([n,e])=>{var i,c;let s=((i=e.find(a=>a.id===t))==null?void 0:i.social)??{};console.log(s);const o=(c=n==null?void 0:n.teams.flatMap(a=>a.players).find(a=>a.id===t))==null?void 0:c.social.twitch;return o&&(s.twitch=o),console.log(s),s});function E(t){let n,e;const s=t[3].default,o=U(s,t,t[2],null);return{c(){n=k("span"),o&&o.c()},m(i,c){C(i,n,c),o&&o.m(n,null),t[4](n),e=!0},p(i,[c]){o&&o.p&&(!e||c&4)&&F(o,s,i,i[2],e?T(s,i[2],c,null):M(i[2]),null)},i(i){e||(j(o,i),e=!0)},o(i){B(o,i),e=!1},d(i){i&&D(n),o&&o.d(i),t[4](null)}}}function G(t,n){if(!t)return;const e=parseFloat(t.style.fontSize.replace("em","")),s=t.getBoundingClientRect().width;if(s/e>n)return;const o=n/s;t.style.fontSize=o>1?"":`${o}em`}function H(t,n,e){let{$$slots:s={},$$scope:o}=n,{maxWidth:i}=n,c;J(async()=>{await K(),G(c,i)});function a(r){L[r?"unshift":"push"](()=>{c=r,e(0,c)})}return t.$$set=r=>{"maxWidth"in r&&e(1,i=r.maxWidth),"$$scope"in r&&e(2,o=r.$$scope)},[c,i,o,s,a]}class $ extends q{constructor(n){super(),R(this,n,H,E,y,{maxWidth:1})}}export{$ as T,m as a,p as b,X as c,b as d,Y as n,Z as r,v as s};
